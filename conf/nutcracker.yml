global:
  worker_processes: 4         # 并发进程数, 如果为0, 这 fallback 回原来的单进程模型(不支持 config reload!)
  user: nobody                # worker 进程的用户, 默认 nobody. 只要主进程是 root 用户启动才生效.
  group: nobody               # worker 进程的用户组
  worker_shutdown_timeout: 30 # 单位为秒. 用于 reload 过程中在改时间段之后强制退出旧的 worker 进程.

pools:                        # pools 的参数参考原文档的相应参数即可, 除了 servers 的配置有改变, 其他都不变.
  alpha:
    listen: 127.0.0.1:22121
    hash: fnv1a_64 # 选择实例的 hash 规则
    distribution: ketama
    auto_eject_hosts: true # server 有问题是否剔除
    redis: true # 是否为 Redis 协议
    server_retry_timeout: 5000 # 被剔除多长时间后会重试
    server_connections: 25 # NOTE: server 连接池的大小, 默认为 1, 建议调整
    server_failure_limit: 5 # 失败多少次后暂时剔除
    timeout: 1000 # Server 超时时间, 1 sec
    backlog: 1024 # 连接队列大小
    preconnect: true # 预连接大小

    servers:
     - 127.0.0.1:6379:1 master  # 将该后端设置为 "主", 所有的写操作都只会转发给这台后端.
     - 127.0.0.1:6380:1

  beta:
    listen: 127.0.0.1:22122
    hash: fnv1a_64
    hash_tag: "{}"
    distribution: ketama
    auto_eject_hosts: false
    timeout: 400
    redis: true
    servers:
     - 127.0.0.1:6380:1 server1
     - 127.0.0.1:6381:1 server2
     - 127.0.0.1:6382:1 server3
     - 127.0.0.1:6383:1 server4

  gamma:
    listen: 127.0.0.1:22123
    hash: fnv1a_64
    distribution: ketama
    timeout: 400
    backlog: 1024
    preconnect: true
    auto_eject_hosts: true
    server_retry_timeout: 2000
    server_failure_limit: 3
    servers:
     - 127.0.0.1:11212:1
     - 127.0.0.1:11213:1

  delta:
    listen: 127.0.0.1:22124
    hash: fnv1a_64
    distribution: ketama
    timeout: 100
    auto_eject_hosts: true
    server_retry_timeout: 2000
    server_failure_limit: 1
    servers:
     - 127.0.0.1:11214:1
     - 127.0.0.1:11215:1
     - 127.0.0.1:11216:1
     - 127.0.0.1:11217:1
     - 127.0.0.1:11218:1
     - 127.0.0.1:11219:1
     - 127.0.0.1:11220:1
     - 127.0.0.1:11221:1
     - 127.0.0.1:11222:1
     - 127.0.0.1:11223:1

  omega:
    listen: /tmp/gamma
    hash: hsieh
    distribution: ketama
    auto_eject_hosts: false
    servers:
     - 127.0.0.1:11214:100000
     - 127.0.0.1:11215:1
